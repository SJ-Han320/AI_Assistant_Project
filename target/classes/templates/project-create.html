<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>프로젝트 생성 - BPE Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .main-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            margin: 20px;
            padding: 30px;
            min-height: calc(100vh - 40px);
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .header-section {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .header-section h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .header-section p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .form-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .form-label {
            font-weight: 600;
            color: #495057;
            margin-bottom: 8px;
        }
        
        .form-control, .form-select {
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 12px 15px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: 600;
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(108, 117, 125, 0.4);
        }
        
        .field-checkbox {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }
        
        .field-checkbox:hover {
            background: #f8f9fa;
            border-color: #667eea;
        }
        
        .field-checkbox input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
        
        .field-checkbox label {
            margin: 0;
            cursor: pointer;
            flex: 1;
        }
        
        .alert {
            border-radius: 10px;
            border: none;
            padding: 15px 20px;
            margin-bottom: 20px;
        }
        
        .alert-success {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
        }
        
        .alert-danger {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- 헤더 섹션 -->
        <div class="header-section">
            <h1><i class="fas fa-plus-circle"></i> 프로젝트 생성</h1>
            <p>새로운 데이터 추출 프로젝트를 생성합니다</p>
        </div>

        <!-- 알림 메시지 -->
        <div th:if="${success}" class="alert alert-success" role="alert">
            <i class="fas fa-check-circle"></i> <span th:text="${success}">성공 메시지</span>
        </div>
        
        <div th:if="${error}" class="alert alert-danger" role="alert">
            <i class="fas fa-exclamation-circle"></i> <span th:text="${error}">오류 메시지</span>
        </div>

        <!-- 프로젝트 생성 폼 -->
        <form th:action="@{/data/create}" method="post" class="form-section">
            <!-- 프로젝트명 -->
            <div class="mb-4">
                <label for="projectName" class="form-label">
                    <i class="fas fa-project-diagram"></i> 프로젝트명
                </label>
                <input type="text" class="form-control" id="projectName" name="projectName" 
                       placeholder="프로젝트명을 입력하세요" required>
            </div>

            <!-- 데이터 쿼리 -->
            <div class="mb-4">
                <label for="dataQuery" class="form-label">
                    <i class="fas fa-database"></i> 데이터 쿼리
                </label>
                <textarea class="form-control" id="dataQuery" name="dataQuery" rows="4" 
                          placeholder="데이터 추출을 위한 쿼리를 입력하세요" required></textarea>
            </div>

            <!-- 요청 필드 목록 -->
            <div class="mb-4">
                <label class="form-label">
                    <i class="fas fa-list"></i> 요청 필드 목록
                </label>
                <div class="field-list" style="max-height: 200px; overflow-y: auto; border: 1px solid #e9ecef; border-radius: 8px; padding: 15px;">
                    <div th:each="field : ${fieldList}" class="field-checkbox">
                        <input type="checkbox" th:id="'field_' + ${field.cValue}" 
                               th:name="selectedFields" th:value="${field.cValue}">
                        <label th:for="'field_' + ${field.cValue}" th:text="${field.cName}">필드명</label>
                    </div>
                    <div th:if="${fieldList == null or fieldList.empty}" class="text-muted text-center py-3">
                        <i class="fas fa-info-circle"></i> 사용 가능한 필드가 없습니다.
                    </div>
                </div>
            </div>

            <!-- 데이터 저장 방식 -->
            <div class="mb-4">
                <label for="storageType" class="form-label">
                    <i class="fas fa-save"></i> 데이터 저장 방식
                </label>
                <select class="form-select" id="storageType" name="storageType">
                    <option value="">저장 방식을 선택하세요</option>
                    <option value="mysql">MySQL</option>
                    <option value="postgresql">PostgreSQL</option>
                    <option value="mongodb">MongoDB</option>
                    <option value="elasticsearch">Elasticsearch</option>
                </select>
            </div>

            <!-- 데이터베이스 연결 정보 -->
            <div class="mb-4">
                <label class="form-label">
                    <i class="fas fa-server"></i> 데이터베이스 연결 정보
                </label>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="host" class="form-label">HOST</label>
                        <input type="text" class="form-control" id="host" name="host" placeholder="localhost">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="user" class="form-label">USER</label>
                        <input type="text" class="form-control" id="user" name="user" placeholder="username">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password" name="password" placeholder="password">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="database" class="form-label">Database</label>
                        <input type="text" class="form-control" id="database" name="database" placeholder="database_name">
                    </div>
                </div>
            </div>

            <!-- 버튼 섹션 -->
            <div class="text-end">
                <a href="/data/supply" class="btn btn-secondary me-2">
                    <i class="fas fa-arrow-left"></i> 돌아가기
                </a>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> 프로젝트 생성
                </button>
            </div>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>