# BPE Platform 배포 가이드

## 🚀 첫 번째 배포 (초기 설정)

### 1단계: 서버 초기 설정
```bash
# 서버에 접속
ssh root@192.168.125.61

# 서버 초기 설정 (한 번만 실행)
chmod +x server-setup.sh
./server-setup.sh
```

### 2단계: 로컬에서 배포
```powershell
# PowerShell에서 실행
.\deploy.ps1
```

## 🔄 코드 수정 후 재배포

로컬에서 코드를 수정한 후 서버에 배포하는 방법:

### 방법 1: 자동 배포 스크립트 사용 (권장)
```powershell
# 로컬 프로젝트 루트에서 실행
.\deploy.ps1
```

### 방법 2: 수동 배포
```powershell
# 1. JAR 파일 빌드
.\mvnw.cmd clean package -DskipTests

# 2. 서버로 파일 전송
scp target/platform-0.0.1-SNAPSHOT.jar root@192.168.125.61:/opt/bpe-platform/

# 3. 서버에서 재시작
ssh root@192.168.125.61 "cd /opt/bpe-platform && ./restart.sh"
```

## 📋 배포 체크리스트

배포 전에 확인해야 할 사항들:

- [ ] 로컬에서 애플리케이션이 정상 실행되는지 확인
- [ ] 데이터베이스 연결 정보가 올바른지 확인
- [ ] 포트 9090이 사용 가능한지 확인
- [ ] 서버에 Java 17이 설치되어 있는지 확인

## 🛠️ 문제 해결

### 빌드 실패 시
```powershell
# Maven 캐시 정리 후 재빌드
.\mvnw.cmd clean
.\mvnw.cmd package -DskipTests
```

### 서버 연결 실패 시
```bash
# SSH 연결 테스트
ssh root@192.168.125.61

# 서버 상태 확인
ping 192.168.125.61
```

### 애플리케이션 시작 실패 시
```bash
# 서버에서 로그 확인
ssh root@192.168.125.61
cd /opt/bpe-platform
tail -f app.log
```

## 📊 배포 상태 확인

### 애플리케이션 실행 상태 확인
```bash
ssh root@192.168.125.61 "cd /opt/bpe-platform && ps aux | grep java"
```

### 웹 애플리케이션 접속 테스트
```bash
curl http://192.168.125.61:9090
```

## 🔄 자동 배포 설정 (선택사항)

개발 중 자동 배포를 원한다면:

1. **Git Hook 설정**: 코드 커밋 시 자동 배포
2. **CI/CD 파이프라인**: GitHub Actions 등 사용
3. **파일 감시**: 로컬 파일 변경 시 자동 배포

## 📝 배포 로그

배포 과정에서 발생하는 로그들:
- **빌드 로그**: Maven 빌드 과정
- **전송 로그**: SCP 파일 전송 과정  
- **서버 로그**: `/opt/bpe-platform/app.log`
